"use client";
import { useEffect, useRef } from 'react';
import * as THREE from 'three';
import { SVGLoader } from 'three/examples/jsm/loaders/SVGLoader';

export default function HandDrawnText() {
    const canvasRef = useRef(null);

    useEffect(() => {
      // Scene with transparent background
      const scene = new THREE.Scene();
  
      const camera = new THREE.PerspectiveCamera(
        60,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.set(0, 0, 80);
  
      const renderer = new THREE.WebGLRenderer({
        canvas: canvasRef.current,
        antialias: true,
        alpha: true, // <-- transparent background
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
  
      // Soft light for subtle shading
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
      scene.add(ambientLight);
  
      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
      directionalLight.position.set(50, 50, 100);
      scene.add(directionalLight);
  
      // ✏️ Example hand-drawn SVG path
      // Replace the `d` value below with your own SVG path
      const svgPath = `M844.44,586.51h-108.08c-3.16-8.38-6.32-16.77-9.48-25.15-1.96-5.21-9.51-4.51-9.82,1.33-.82,15.23,3.26,30.03,5.67,44.94,2.12,13.18,2.97,29.42-7.41,39.59-13.74,13.47-42.66,9.43-50.1-9.1-1.39-3.45-5.41-5-8.36-2.21-10.93,10.38-19.29,23.08-24.5,37.11-3.99-6.25-9.36-11.68-16-14.35-4.72-1.9-9.84-1.75-14.2,1.02-5.94,3.77-7.31,10.31-9.35,16.53-4.36,13.3-17.26,21.76-30.77,23.24.99-1.73,1.83-3.57,2.46-5.54,4.22-13.25-1.1-27.84-12.14-35.9-2.82-2.06-6.35.26-7.34,2.99l-13.27,36.31c-.78,2.14.55,4.5,2.3,5.65,1.01.67,2.05,1.27,3.1,1.84-6.94.59-14.14-2.13-19.11-7.63-4.98-5.51-8.33-12.57-11.72-19.11-3.83-7.38-7.39-14.9-10.68-22.54-3.24-7.53-6.18-15.18-8.86-22.93h137.96c6.43,0,6.45-10,0-10h-141c-.08,0-.16,0-.23.01-1.62-5.18-3.14-10.39-4.54-15.63-1.7-6.39-10.55-3.53-9.64,2.66,2.28,15.58,3.17,31.36,2.72,47.09-1.99-.5-4.19.23-5.48,2.26-8.05,12.69-14.81,26.1-20.25,40.1-1.29,3.33-2.5,6.68-3.63,10.07-.59,1.77-1.38,3.57-1.73,5.39-15.21-.49-30.46-12.34-32.51-27.66-.6-4.48-6.67-7.35-9.32-2.52l-18.19,33.21c-6.58-6.53-14.2-11.91-22.63-15.88-2.2-1.04-5.71-.86-6.84,1.79-6.48,15.14-12.95,30.27-19.43,45.41-6.85-17.58-12.32-35.7-16.38-54.12,1.07.28,2.26.24,3.49-.32,32.56-14.69,64.25-31.23,94.91-49.56,5.52-3.3.49-11.95-5.05-8.63-30.66,18.33-62.34,34.88-94.91,49.56-.1.04-.18.09-.27.14-1.81-9.28-3.26-18.62-4.34-28-.51-4.41-6.86-7.45-9.32-2.52-12.48,25-24.95,50-37.43,74.99-3.99-2.16-7.62-5.01-10.65-8.54-10.42-12.15-11.65-30.5-4.01-44.33,3.11-5.64-5.52-10.69-8.63-5.05-9.63,17.45-8.05,39.8,4.64,55.33,3.93,4.81,8.79,8.68,14.19,11.55-2.53,5.06-5.06,10.13-7.58,15.2-4.42,8.85-18.48,30.12-2.94,36.36,6.01,2.41,13.27-.26,18.86-2.68,5.95-2.58,11.38-6.27,16.06-10.76,10.65-10.21,17.02-24.33,17.32-39.08.06-3.19-3.25-5.75-6.33-4.82-7.04,2.13-14.54,2.21-21.57.45,9.9-19.83,19.8-39.66,29.69-59.49,4.92,30.86,13.55,60.89,25.83,89.74,1.4,3.28,7.23,3.27,8.63,0,7.33-17.13,14.66-34.26,21.98-51.39,7.69,4.32,14.44,9.84,20.24,16.65,2.08,2.43,6.39,1.65,7.85-1.01,5.32-9.72,10.65-19.44,15.97-29.16,7.9,16.06,25.81,26.91,43.67,24.95,1.93,1.26,4.18,2.06,6.44,2.4,12.52,1.85,20.48-8.55,23.47-19.47.6-2.21,1.14-4.45,1.63-6.71,3.75-8.22,5.11-17.59,3.62-26.45.32-4.12.55-8.23.74-12.27.21-4.38.29-8.77.28-13.15,1.06,2.72,2.15,5.43,3.28,8.12,6.01,14.29,12.42,29.46,21.41,42.17,7.5,10.6,18.34,17.33,31.64,15.68,5.1-.63,9.95-2.43,14.11-5.18,13.99,1.51,28.75-3.48,39-13.27,3.63-3.46,6.7-7.63,8.84-12.17,2.15-4.57,2.62-13.37,7.26-16.03,4.14-2.38,9.04,2.06,11.74,4.84,4.15,4.28,7.33,9.59,9.24,15.24,1.49,4.4,8.48,5.1,9.64,0,3.45-15.2,10.61-28.94,21-40.36,9.43,13.85,27.46,19.71,44.11,16.38,9.5-1.9,18.15-7.28,23.55-15.38,7.38-11.06,7.93-24.88,6.31-37.65-.31-2.41-.68-4.81-1.09-7.2,9.21,24.68,18.43,49.36,27.95,73.92,2.66,6.86,5.77,13.51,11.91,17.93,5.68,4.09,12.61,5.19,19.43,4.06,14.72-2.43,27.65-13.42,37.28-24.2,4.27-4.79-2.78-11.88-7.07-7.07-8.32,9.32-19.83,20.01-32.82,21.62-16.26,2.01-20.12-17.73-24.48-29.32-8.07-21.43-16.15-42.87-24.22-64.3h104.31c6.43,0,6.45-10,0-10ZM289.35,744.79c-1.93,11.4-8.31,21.87-17.56,28.95-4.77,3.66-11.75,7.87-17.94,8.09-4.33.15-3.33-3.26-2.29-6.28,1.47-4.27,3.96-8.31,5.97-12.35,3.33-6.68,6.66-13.35,10-20.03,7.04,2.09,14.55,2.68,21.83,1.62ZM470.7,677.14c-.68,6.55-1.31,13.52-2.64,20.22-3.03,6.25-7.9,11.54-14.34,14.6-.55.26-1.11.5-1.67.72,4.71-14.14,10.82-27.69,18.26-40.58.25.83.45,1.67.63,2.52-.08.84-.15,1.68-.24,2.51ZM550.93,698c-.28.3-.56.59-.84.87-2.54-.55-5.02-1.38-7.38-2.52,3.05-8.34,6.1-16.69,9.15-25.03,5.46,7.84,5.66,19.45-.93,26.68Z`;
  
      // Parse SVG path and convert to 3D points
        const loader = new SVGLoader();
        const parsed = loader.parse(`<svg><path d="${svgPath}" /></svg>`);
        const path = parsed.paths[0];
        const points = path.subPaths[0].getPoints(50);

        const curve = new THREE.CatmullRomCurve3(
        points.map((p) => new THREE.Vector3(p.x - 100, -p.y + 40, 0))
        );

        // Tube (pipe)
        const geometry = new THREE.TubeGeometry(curve, 100, 1.5, 16, false);
        const material = new THREE.MeshStandardMaterial({
        color: 0x0088ff,
        metalness: 0.6,
        roughness: 0.3,
        });

        const tube = new THREE.Mesh(geometry, material);
        scene.add(tube);

        renderer.render(scene, camera);

        // Handle resize
        const handleResize = () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.render(scene, camera);
        };
        window.addEventListener('resize', handleResize);

        return () => window.removeEventListener('resize', handleResize);
    }, []);

    return (
        <canvas
        ref={canvasRef}
        style={{
            display: 'block',
            width: '100%',
            height: '100%',
        }}
        />
    );
}
